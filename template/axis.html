<!doctype>
<html>
{% include 'header.html' %}
<style>
  * {
    overflow: hidden;  
  }    
  #myChartflow {
      position: absolute;
      margin-left: -400px;
      left: 50%;
  z-index: 280;
  }
</style>

<body>
<div class="sr-only values">
  {% for val in evalues %}
    <p>{{ val }}</p>
  {% endfor %}

</div>

<div class="jumbotron">
    <div class="container">
      <h1>心情轴<h2><small>波浪起伏，看看你最近的心情状况...</small></h2></h1>
      <button class="btn btn-success disabled">{{ username }}</button>
      <a href="/mood/" class="btn btn-warning">回到主页</a>
    </div>
    
</div>

<div class="text-center block-center conatiner">
    <canvas id="myChart" width="800" height="400" class="axis-cvs"></canvas>
     <canvas id="myChartflow" width="800" height="400" class="axis-cvs"></canvas>
</div>
<!-- <br> -->
<div class="conatiner text-center block-center">
    <div class="row col-lg-offset-2 col-lg-12 col-md-offset-2
    col-md-12">
      {% for post in posts %}
      <div class="col-lg-1 col-md-1">
        <div class="thumbnail">
          <img src="{{ post.img }}" width="200" height="200" alt="..." class="sr-only">
          <div class="caption">
            <p>{{ post.text }}</p>
          </div>
        </div>
      </div>
      {% endfor %}


    </div>
    <div class="col-lg-12 col-md-12 text-center">
      <ul class="pager">
          <li class="previous"><a href="#">上个月的心情记录</a></li>
          <li class="next"><a href="#">下个月的心情记录</a></li>
      </ul>
    </div>
</div>
{% include 'footer.html' %}
<script type="text/javascript" src="/static/js/Chart.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  var dataList = []

  $('.values').children().each(function(index, ele){
    dataList.push(parseFloat($(ele).text()))
  })
  console.log(dataList)
  var data = {
      labels : ["day1","day2","day3","day4","day5","day6","day7"],
      datasets : [
          {
              fillColor : "rgba(151,187,205,0.5)",
              strokeColor : "rgba(151,187,205,1)",
              pointColor : "rgba(151,187,205,1)",
              pointStrokeColor : "#fff",
              data : dataList //[0.25,0.59,-0.70,0.11,0.56,-0.75,-0.13]
          },
          // {
          //     fillColor : "rgba(151,187,205,0.5)",
          //     strokeColor : "rgba(151,187,205,1)",
          //     pointColor : "rgba(151,187,205,1)",
          //     pointStrokeColor : "#fff",
          //     data : [28,48,40,19,96,27,100]
          // }
      ]
  }
  var ctx = $("#myChart").get(0).getContext("2d");
  //This will get the first returned node in the jQuery collection.
  var myNewChart = new Chart(ctx).Line(data);

  var ctxflow = $("#myChartflow").get(0).getContext("2d");
  var img = new Image();
  var thumbnails = $('.thumbnail')
  thumbnails.each(function(i, ele) {
    img.src = $(ele).children()[0].src;
    // console.log( $(ele).children()[0].src );
    ctxflow.drawImage(img,20+120*i,350-400*(data.datasets[0].data[i]+1)/2,50,50);    
  })
  // for(var i = 0; i < thumbnails.length; i++) {
  // }
  
})
</script>
</body>
</html>